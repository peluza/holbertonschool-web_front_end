<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 0</title>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <script type="application/javascript">
      function createFamilyTree() {
        $("body").append("<table>");
        $("table").append("<thead>");
        $("thead").append("<tr>");
        $("thead > tr").append("<th>");
        $("thead > tr").append("<th>");
        $("thead > tr th:nth-child(1)").text("Firstname");
        $("thead > tr th:nth-child(2)").text("Lastname");
        $("table").append("<tbody>");
      }

      function addNewMember(firstName, lastName, position) {
        if (position === "before") {
          $("tbody").append("<tr></tr>");
          $("tbody > tr:first").append("<td></td>", "<td></td>", "<td></td>");
          $("tbody > tr:first > td:nth-of-type(1)").text(firstName);
          $("tbody > tr:first > td:nth-of-type(2)").text(lastName);
          $("tbody > tr:first > td:nth-of-type(3)").text("(x)");
          $("tbody > tr:first > td:nth-of-type(3)").css(
            "backgroundColor",
            "orange"
          );
          $("tbody > tr:first > td:nth-of-type(3)").click(function () {
            $(this).parent().remove();
          });
        } else {
          $("tbody").append("<tr></tr>");
          $("tbody > tr:last").append("<td></td>", "<td></td>", "<td></td>");
          $("tbody > tr:last > td:nth-of-type(1)").text(firstName);
          $("tbody > tr:last > td:nth-of-type(2)").text(lastName);
          $("tbody > tr:last > td:nth-of-type(3)").text("(x)");
          $("tbody > tr:last > td:nth-of-type(3)").css(
            "backgroundColor",
            "orange"
          );
          $("tbody > tr:last > td:nth-of-type(3)").click(function () {
            $(this).parent().remove();
          });
        }
      }

      function createForm() {
        $("body").prepend(
          '<input type="text" /> \
      						<input type="text" /> \
      					<select> \
        				<option value="before">Before</option> \
        				<option value="after">After</option> \
      					</select> \
      					<input type="submit" />'
        );
        $("input:last").click(function () {
          let firstName = $("input:first").val();
          let lastName = $("input:nth-of-type(2)").val();
          let position = $("select").val();
          addNewMember(firstName, lastName, position);
        });
      }

      createFamilyTree();
      createForm();
    </script>
  </body>
</html>
